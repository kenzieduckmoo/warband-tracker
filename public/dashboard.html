<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warband Tracker - Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1>Warband Tracker - Dashboard</h1>
                <div class="header-info">
                    <span id="user-tag" class="user-tag"></span>
                    <div class="region-selector">
                        <label for="region-select">Region:</label>
                        <select id="region-select" class="region-select">
                            <option value="us">NA/OCE</option>
                            <option value="eu">EU</option>
                        </select>
                    </div>
                    <button id="refresh-btn" class="btn-refresh">ðŸ”„ Refresh Data</button>
                    <button id="update-recipe-cache-btn" class="btn-update-cache">ðŸ”„ Update Recipe Cache</button>
                    <a href="/characters" class="btn-link">Character Manager</a>
                    <button id="logout-btn" class="btn-logout">Logout</button>
                </div>
            </div>
        </header>

        <!-- Level Filter Controls -->
        <div class="filter-controls">
            <div class="filter-buttons">
                <button id="filter-80s" class="filter-btn active" data-filter="80s">80s Only</button>
                <button id="filter-70-80" class="filter-btn" data-filter="70-80">70-80</button>
                <button id="filter-10-80" class="filter-btn" data-filter="10-80">10-80</button>
            </div>
            <div class="filter-info">
                <span id="filter-description">Showing level 80 characters only</span>
            </div>
        </div>

        <!-- Main Dashboard Grid -->
        <main class="dashboard-main">
            <!-- Quick Stats Row -->
            <section class="stats-row">
                <div class="stat-card">
                    <div class="stat-value" id="total-characters">0</div>
                    <div class="stat-label">Total Characters</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="max-level-chars">0</div>
                    <div class="stat-label">Level 80 Characters</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avg-ilvl">0</div>
                    <div class="stat-label">Average Item Level</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-professions">0</div>
                    <div class="stat-label">Total Professions</div>
                </div>
                <div class="stat-card wow-token-card">
                    <div class="stat-value" id="token-price">-</div>
                    <div class="stat-label">WoW Token Price (Gold)</div>
                    <div class="token-updated" id="token-updated"></div>
                </div>
            </section>

            <!-- Main Content Grid -->
            <div class="dashboard-grid">
                <!-- Class/Race/Faction Matrix -->
                <section class="dashboard-card coverage-card">
                    <h2>Character Coverage</h2>
                    <div class="coverage-stats">
                        <span id="coverage-percentage">0%</span> Complete
                        <span class="coverage-detail">(<span id="coverage-count">0</span> unique combinations)</span>
                    </div>
                    
                    <div class="coverage-grid">
                        <div class="coverage-section">
                            <h3>By Race</h3>
                            <div id="race-list" class="coverage-list">
                                <!-- Race counts will be populated here -->
                            </div>
                        </div>
                        
                        <div class="coverage-section">
                            <h3>By Class</h3>
                            <div id="class-list" class="coverage-list">
                                <!-- Class counts will be populated here -->
                            </div>
                        </div>
                        
                        <div class="coverage-section">
                            <h3>By Faction</h3>
                            <div id="faction-list" class="coverage-list">
                                <!-- Faction counts will be populated here -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Profession Overview -->
                <section class="dashboard-card professions-card">
                    <h2>Profession Coverage</h2>
                    <div id="professions-overview" class="professions-grid">
                        <!-- Professions will be populated here -->
                    </div>
                </section>

                <!-- Missing Profession Coverage -->
                <section class="dashboard-card missing-coverage-card">
                    <h2>Missing Profession Coverage</h2>
                    <div id="missing-coverage" class="missing-coverage-grid">
                        <!-- Missing profession tiers will be populated here -->
                    </div>
                </section>

                <!-- Character List Summary -->
                <section class="dashboard-card characters-card">
                    <h2>Top Characters by Item Level</h2>
                    <div id="top-characters" class="character-list">
                        <!-- Top characters will be listed here -->
                    </div>
                </section>

                <!-- Recent Activity -->
                <section class="dashboard-card activity-card">
                    <h2>Character Goals & Notes</h2>
                    <div id="recent-notes" class="notes-summary">
                        <!-- Recent notes preview will be shown here -->
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="dashboard.js?v=20250909-level-filters-fixed"></script>
    <script src="footer.js"></script>
</body>
</html>