<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profession Planning - Warband Tracker</title>
    <link rel="stylesheet" href="profession-planning.css">
</head>
<body>
    <div class="container">
        <!-- Navigation Header -->
        <nav class="top-nav">
            <div class="nav-left">
                <a href="/" class="nav-link">‚Üê Back to Dashboard</a>
                <h1 class="page-title">üî® Profession Planning</h1>
            </div>
            <div class="nav-right">
                <button class="btn btn-secondary" id="refresh-data-btn">üîÑ Refresh Auction Data</button>
            </div>
        </nav>

        <div class="main-content">
            <!-- Profession Sidebar -->
            <aside class="profession-sidebar">
                <h2>üìã Your Professions</h2>
                <div class="profession-list" id="profession-list">
                    <div class="profession-item" data-profession="alchemy">
                        <div class="profession-icon">‚öóÔ∏è</div>
                        <div class="profession-info">
                            <div class="profession-name">Alchemy</div>
                            <div class="profession-main" id="alchemy-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="alchemy">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="blacksmithing">
                        <div class="profession-icon">üî®</div>
                        <div class="profession-info">
                            <div class="profession-name">Blacksmithing</div>
                            <div class="profession-main" id="blacksmithing-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="blacksmithing">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="enchanting">
                        <div class="profession-icon">‚ú®</div>
                        <div class="profession-info">
                            <div class="profession-name">Enchanting</div>
                            <div class="profession-main" id="enchanting-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="enchanting">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="engineering">
                        <div class="profession-icon">‚öôÔ∏è</div>
                        <div class="profession-info">
                            <div class="profession-name">Engineering</div>
                            <div class="profession-main" id="engineering-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="engineering">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="herbalism">
                        <div class="profession-icon">üåø</div>
                        <div class="profession-info">
                            <div class="profession-name">Herbalism</div>
                            <div class="profession-main" id="herbalism-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="herbalism">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="inscription">
                        <div class="profession-icon">üìú</div>
                        <div class="profession-info">
                            <div class="profession-name">Inscription</div>
                            <div class="profession-main" id="inscription-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="inscription">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="jewelcrafting">
                        <div class="profession-icon">üíé</div>
                        <div class="profession-info">
                            <div class="profession-name">Jewelcrafting</div>
                            <div class="profession-main" id="jewelcrafting-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="jewelcrafting">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="leatherworking">
                        <div class="profession-icon">ü™°</div>
                        <div class="profession-info">
                            <div class="profession-name">Leatherworking</div>
                            <div class="profession-main" id="leatherworking-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="leatherworking">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="mining">
                        <div class="profession-icon">‚õèÔ∏è</div>
                        <div class="profession-info">
                            <div class="profession-name">Mining</div>
                            <div class="profession-main" id="mining-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="mining">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="skinning">
                        <div class="profession-icon">üî™</div>
                        <div class="profession-info">
                            <div class="profession-name">Skinning</div>
                            <div class="profession-main" id="skinning-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="skinning">Assign</button>
                    </div>

                    <div class="profession-item" data-profession="tailoring">
                        <div class="profession-icon">ü™°</div>
                        <div class="profession-info">
                            <div class="profession-name">Tailoring</div>
                            <div class="profession-main" id="tailoring-main">No main assigned</div>
                        </div>
                        <button class="assign-btn" data-profession="tailoring">Assign</button>
                    </div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="planning-main">
                <div class="welcome-section" id="welcome-section">
                    <div class="welcome-content">
                        <h2>Welcome to Profession Planning</h2>
                        <p>Select a profession from the sidebar to view missing recipes, cost analysis, and shopping recommendations with real-time auction house pricing.</p>

                        <div class="quick-actions">
                            <h3>Quick Actions</h3>
                            <div class="action-buttons">
                                <button class="btn btn-primary" id="assign-all-mains-btn">üìã Assign All Profession Mains</button>
                                <button class="btn btn-secondary" id="view-summary-btn">üìä View Cost Summary</button>
                            </div>
                        </div>

                        <div class="features-preview">
                            <h3>Features Available</h3>
                            <ul>
                                <li>üè™ Real-time auction house pricing (server-specific + commodities)</li>
                                <li>üí∞ Complete recipe cost analysis with shopping lists</li>
                                <li>üåç Cross-server price comparison for best deals</li>
                                <li>üë• Profession main assignment for warband coordination</li>
                                <li>üìà Material cost tracking and optimization</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Profession Details Section (Hidden by default) -->
                <div class="profession-details" id="profession-details" style="display: none;">
                    <div class="profession-header">
                        <h2 id="selected-profession-title">Alchemy Planning</h2>
                        <div class="profession-stats">
                            <div class="stat-item">
                                <span class="stat-label">Characters:</span>
                                <span class="stat-value" id="total-recipes">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Missing Recipes:</span>
                                <span class="stat-value" id="missing-recipes">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Estimated Cost:</span>
                                <span class="stat-value" id="estimated-cost">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Character Selection Section -->
                    <div class="character-section">
                        <h3>üë• Characters with this Profession</h3>
                        <div class="character-grid" id="character-grid">
                            <!-- Characters will be populated here -->
                        </div>
                    </div>

                    <!-- Collection Analytics -->
                    <div class="analytics-section">
                        <h3>üìä Collection Progress Analytics</h3>
                        <div class="analytics-content">
                            <div class="analytics-overview" id="analytics-overview">
                                <div class="analytics-loading">Loading collection analytics...</div>
                            </div>

                            <div class="analytics-details" id="analytics-details" style="display: none;">
                                <div class="analytics-grid">
                                    <div class="analytics-card">
                                        <h4>üìà Collection Velocity</h4>
                                        <div id="velocity-content">
                                            <div class="velocity-stat">
                                                <span class="velocity-label">Weekly Rate:</span>
                                                <span class="velocity-value" id="velocity-weekly">-</span>
                                            </div>
                                            <div class="velocity-stat">
                                                <span class="velocity-label">Monthly Rate:</span>
                                                <span class="velocity-value" id="velocity-monthly">-</span>
                                            </div>
                                            <div class="velocity-trend" id="velocity-trend">
                                                Calculating trend...
                                            </div>
                                        </div>
                                    </div>

                                    <div class="analytics-card">
                                        <h4>üéØ Completion Projection</h4>
                                        <div id="projection-content">
                                            <div class="projection-stat">
                                                <span class="projection-label">Current Progress:</span>
                                                <span class="projection-value" id="current-progress">-</span>
                                            </div>
                                            <div class="projection-stat">
                                                <span class="projection-label">Est. Completion:</span>
                                                <span class="projection-value" id="estimated-completion">-</span>
                                            </div>
                                            <div class="projection-confidence" id="projection-confidence">
                                                Analyzing patterns...
                                            </div>
                                        </div>
                                    </div>

                                    <div class="analytics-card">
                                        <h4>üìã Progress Summary</h4>
                                        <div id="summary-content">
                                            <div class="summary-stat">
                                                <span class="summary-label">Total Recipes:</span>
                                                <span class="summary-value" id="total-recipes">-</span>
                                            </div>
                                            <div class="summary-stat">
                                                <span class="summary-label">Collected:</span>
                                                <span class="summary-value" id="collected-recipes">-</span>
                                            </div>
                                            <div class="summary-progress">
                                                <div class="progress-bar">
                                                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                                                </div>
                                                <span class="progress-text" id="progress-text">0%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cross-Server Comparison -->
                    <div class="comparison-section">
                        <h3>üåç Cross-Server Price Comparison</h3>
                        <div class="comparison-content" id="comparison-content">
                            <p>Select recipes above to see cross-server pricing...</p>
                        </div>
                    </div>

                    <!-- Recipe Cost Analysis -->
                    <div class="recipe-section">
                        <h3>üìù Missing Recipes & Costs</h3>
                        <div class="recipe-filters">
                            <select id="sort-filter">
                                <option value="cost-desc">Most Expensive First</option>
                                <option value="cost-asc" selected>Least Expensive First</option>
                                <option value="name-asc">Name A-Z</option>
                            </select>
                            <button class="btn btn-small" id="export-shopping-list">üìã Export Shopping List</button>
                        </div>

                        <div class="recipe-list" id="recipe-list">
                            <div class="loading-message">
                                Loading recipe data...
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Character Selection Modal -->
    <div class="modal-overlay" id="character-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Assign Profession Main</h3>
                <button class="modal-close" id="close-modal">√ó</button>
            </div>
            <div class="modal-body">
                <p>Select a character to be the main for <span id="modal-profession-name"></span>:</p>
                <div class="character-list" id="character-list">
                    <!-- Characters will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script src="profession-planning.js"></script>
</body>
</html>